!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).markdownItAnchor=n()}(this,function(){var e=!1,n={false:"push",true:"unshift",after:"push",before:"unshift"};function t(t,r,i,a){var o;if(!e){var c="Using deprecated markdown-it-anchor permalink option, see https://github.com/valeriangalliat/markdown-it-anchor#todo-anchor-or-file";process&&process.emitWarning?process.emitWarning(c):console.warn(c),e=!0}var l=[Object.assign(new i.Token("link_open","a",1),{attrs:[].concat(r.permalinkClass?[["class",r.permalinkClass]]:[],[["href",r.permalinkHref(t,i)]],Object.entries(r.permalinkAttrs(t,i)))}),Object.assign(new i.Token("html_block","",0),{content:r.permalinkSymbol}),new i.Token("link_close","a",-1)];r.permalinkSpace&&i.tokens[a+1].children[n[r.permalinkBefore]](Object.assign(new i.Token("text","",0),{content:" "})),(o=i.tokens[a+1].children)[n[r.permalinkBefore]].apply(o,l)}function r(e){return"#"+e}function i(e){return{}}var a={class:"header-anchor",renderHref:r,renderAttrs:i,symbol:"#"};function o(e){function n(t){return t=Object.assign({},n.defaults,t),function(n,r,i,a){return e(n,t,r,i,a)}}return n.defaults=Object.assign({},a),n}var c=o(function(e,t,r,i,a){var o,c=[Object.assign(new i.Token("link_open","a",1),{attrs:[].concat(t.class?[["class",t.class]]:[],[["href",t.renderHref(e,i)],["aria-hidden","true"]],Object.entries(t.renderAttrs(e,i)))}),Object.assign(new i.Token("text","",0),{content:t.symbol}),new i.Token("link_close","a",-1)];t.space&&i.tokens[a+1].children[n[t.placement]](Object.assign(new i.Token("text","",0),{content:" "})),(o=i.tokens[a+1].children)[n[t.placement]].apply(o,c)});Object.assign(c.defaults,{space:!0,placement:"after"});var l=o(function(e,n,t,r,i){var a=[Object.assign(new r.Token("link_open","a",1),{attrs:[].concat(n.class?[["class",n.class]]:[],[["href",n.renderHref(e,r)]],Object.entries(n.renderAttrs(e,r)))})].concat(r.tokens[i+1].children,[new r.Token("link_close","a",-1)]);r.tokens[i+1]=Object.assign(new r.Token("inline","",0),{children:a})}),s=o(function(e,t,r,i,a){var o;if(!["visually-hidden","aria-label","aria-describedby"].includes(t.style))throw new Error("`permalink.linkAfterHeader` called with unknown style option `"+t.style+"`");if("aria-describedby"!==t.style&&!t.assistiveText)throw new Error("`permalink.linkAfterHeader` called without the `assistiveText` option in `"+t.style+"` style");if("visually-hidden"===t.style&&!t.visuallyHiddenClass)throw new Error("`permalink.linkAfterHeader` called without the `visuallyHiddenClass` option in `visually-hidden` style");var c=i.tokens[a+1].children.filter(function(e){return"text"===e.type||"code_inline"===e.type}).reduce(function(e,n){return e+n.content},""),l=[],s=[];t.class&&s.push(["class",t.class]),s.push(["href",t.renderHref(e,i)]),s.push.apply(s,Object.entries(t.renderAttrs(e,i))),"visually-hidden"===t.style?(l.push(Object.assign(new i.Token("span_open","span",1),{attrs:[["class",t.visuallyHiddenClass]]}),Object.assign(new i.Token("text","",0),{content:t.assistiveText(c)}),new i.Token("span_close","span",-1)),t.space&&l[n[t.placement]](Object.assign(new i.Token("text","",0),{content:" "})),l[n[t.placement]](Object.assign(new i.Token("span_open","span",1),{attrs:[["aria-hidden","true"]]}),Object.assign(new i.Token("text","",0),{content:t.symbol}),new i.Token("span_close","span",-1))):l.push(Object.assign(new i.Token("text","",0),{content:t.symbol})),"aria-label"===t.style?s.push(["aria-label",t.assistiveText(c)]):"aria-describedby"===t.style&&s.push(["aria-describedby",e]);var u=[Object.assign(new i.Token("paragraph_open","p",1),{attrs:[].concat(t.paragraphClass?[["class",t.paragraphClass]]:[]),block:!0}),Object.assign(new i.Token("inline","",0),{children:[Object.assign(new i.Token("link_open","a",1),{attrs:s})].concat(l,[new i.Token("link_close","a",-1)])}),Object.assign(new i.Token("paragraph_close","p",-1),{block:!0})];(o=i.tokens).splice.apply(o,[a+3,0].concat(u))});function u(e,n,t,r){var i=e,a=r;if(t&&Object.prototype.hasOwnProperty.call(n,i))throw new Error("User defined `id` attribute `"+e+"` is not unique. Please fix it in your Markdown to continue.");for(;Object.prototype.hasOwnProperty.call(n,i);)i=e+"-"+a,a+=1;return n[i]=!0,i}function d(e,n){n=Object.assign({},d.defaults,n),e.core.ruler.push("anchor",function(e){var r,i={},a=e.tokens,o=Array.isArray(n.level)?(r=n.level,function(e){return r.includes(e)}):function(e){return function(n){return n>=e}}(n.level);a.forEach(function(r,c){if("heading_open"===r.type&&o(Number(r.tag.substr(1)))){var l=a[c+1].children.filter(function(e){return"text"===e.type||"code_inline"===e.type}).reduce(function(e,n){return e+n.content},""),s=r.attrGet("id");s=null==s?u(n.slugify(l),i,!1,n.uniqueSlugStartIndex):u(s,i,!0,n.uniqueSlugStartIndex),r.attrSet("id",s),"function"==typeof n.permalink?n.permalink(s,n,e,c):(n.permalink||n.renderPermalink&&n.renderPermalink!==t)&&n.renderPermalink(s,n,e,c),n.callback&&n.callback(r,{slug:s,title:l})}})})}return Object.assign(s.defaults,{style:"visually-hidden",space:!0,placement:"after"}),d.permalink={__proto__:null,legacy:t,renderHref:r,renderAttrs:i,makePermalink:o,ariaHidden:c,headerLink:l,linkAfterHeader:s},d.defaults={level:1,slugify:function(e){return encodeURIComponent(String(e).trim().toLowerCase().replace(/\s+/g,"-"))},uniqueSlugStartIndex:1,permalink:!1,renderPermalink:t,permalinkClass:c.defaults.class,permalinkSpace:c.defaults.space,permalinkSymbol:c.defaults.symbol,permalinkBefore:"before"===c.defaults.placement,permalinkHref:c.defaults.renderHref,permalinkAttrs:c.defaults.renderAttrs},d});
//# sourceMappingURL=markdownItAnchor.umd.js.map
